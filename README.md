# ????Terraform??????????

??????????????????Terraform?Kubernetes??????????

## ?????

- Docker & Docker Compose
- Terraform >= 1.0
- Kubernetes?Minikube/kind/k3d?+ kubectl

## ????????

### 1. ????????????

```bash
make docker-compose-up
# ???
docker-compose up -d
```

????: `http://localhost:8080`

### 2. LLM???????????????

```bash
docker-compose up llm-app -d
```

????: `http://localhost:8081`

**???????????**:
- ??????JSON???
- Prometheus?????????`/metrics`?
- ???????`/traces`?
- ????????`observability_dashboard.html`?????????

### 3. Terraform?Kubernetes?????

```bash
# Kubernetes??????Minikube????
minikube start
eval $(minikube docker-env)
docker build -t sample-app:latest .

# Terraform?????
terraform init
terraform apply

# ??
kubectl get all -n sample-app
kubectl port-forward -n sample-app svc/sample-app-service 8080:80
```

### 4. ???????

```bash
terraform destroy
docker-compose down
```

## ???????

```bash
make help              # ??????
make docker-compose-up # ?????
make terraform-init    # Terraform???
make terraform-apply   # Terraform?????
make test             # ?????
```

## ??????

- **[docs/PRACTICE.md](./docs/PRACTICE.md)** - ????????????
- **[docs/QUICKREF.md](./docs/QUICKREF.md)** - ????????????????????
- **[docs/TROUBLESHOOTING.md](./docs/TROUBLESHOOTING.md)** - ???????????
- **[docs/CHANGELOG.md](./docs/CHANGELOG.md)** - ????

## LLM???????????

??????LLM?????????????????????????????????????

### ??

1. **?????**: JSON???????
2. **?????**: Prometheus?????????????????????????????????
3. **??????**: ?????????????OpenTelemetry??
4. **???????**: HTML?????????????

### ???

```bash
# LLM??????
docker-compose up llm-app -d

# ????API????
curl -X POST http://localhost:8081/chat \
  -H "Content-Type: application/json" \
  -d '{"message": "Hello!"}'

# ????????
curl http://localhost:8081/metrics

# ????????????
curl http://localhost:8081/traces

# ?????????????????
open observability_dashboard.html
```

## ????????

?? **?????????????????????????????**

- `DEBUG=True`???????
- ??????????????`.gitignore`??????

## ??????

```
app.py                      # Flask???
llm_app.py                  # LLM?????????????????
observability_dashboard.html # ????????????????
docker-compose.yml          # Docker Compose??
main.tf                     # Terraform??
k8s-manifests.yaml         # Kubernetes???????????
docs/                      # ??????
  PRACTICE.md              # ?????
  QUICKREF.md              # ??????????
  TROUBLESHOOTING.md       # ???????????
  CHANGELOG.md             # ????
.cursorrules               # Cursor???????????
```

????????????????????
