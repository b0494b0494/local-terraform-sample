# ??????????

?????????Terraform?????????????????

## ????????

### Docker Compose
```bash
docker-compose up -d          # ??
docker-compose down           # ??
docker-compose logs -f        # ????
docker-compose ps             # ????
```

### Terraform
```bash
terraform init                # ???
terraform plan                # ????
terraform apply               # ??
terraform destroy             # ??
terraform show                # ????
terraform fmt                 # ??????
terraform validate            # ???????
```

### kubectl??????
```bash
# ??
kubectl get pods -n sample-app
kubectl get svc -n sample-app
kubectl get all -n sample-app

# ??
kubectl logs -n sample-app <pod-name>
kubectl logs -n sample-app -l app=sample-app

# ????
kubectl describe pod -n sample-app <pod-name>
kubectl get events -n sample-app --sort-by='.lastTimestamp'

# ????
kubectl port-forward -n sample-app svc/sample-app-service 8080:80
kubectl exec -it -n sample-app <pod-name> -- /bin/sh
```

## Terraform????

### ConfigMap????
```hcl
resource "kubernetes_config_map" "app_config" {
  metadata {
    name      = "app-config"
    namespace = kubernetes_namespace.sample_app.metadata[0].name
  }
  data = {
    APP_NAME = "sample-app"
    VERSION  = "1.0.0"
  }
}

# Deployment???
env {
  name = "APP_NAME"
  value_from {
    config_map_key_ref {
      name = kubernetes_config_map.app_config.metadata[0].name
      key  = "APP_NAME"
    }
  }
}
```

### ??????
```hcl
# variables.tf
variable "replica_count" {
  description = "Number of replicas"
  type        = number
  default     = 2
}

# main.tf
replicas = var.replica_count
```

### Health Check????
```hcl
liveness_probe {
  http_get {
    path = "/health"
    port = 8080
  }
  initial_delay_seconds = 30
  period_seconds        = 10
  timeout_seconds       = 5
}

readiness_probe {
  http_get {
    path = "/health"
    port = 8080
  }
  initial_delay_seconds = 10
  period_seconds        = 5
}
```

### Resource Limits??
```hcl
resources {
  requests = {
    cpu    = "100m"
    memory = "128Mi"
  }
  limits = {
    cpu    = "500m"
    memory = "512Mi"
  }
}
```

## ????????????????

1. **????**: `kubectl get all -n sample-app`
2. **????**: `kubectl logs -n sample-app <pod-name>`
3. **????**: `kubectl describe pod -n sample-app <pod-name>`
4. **??????**: `kubectl get events -n sample-app`
5. **Terraform??**: `terraform show`

## ??????????

### ??????????
```bash
# 1. ?????
vim main.tf

# 2. ??????????????
terraform fmt
terraform validate

# 3. ????
terraform plan

# 4. ??
terraform apply
```

### ???????
```bash
# Pod????????
kubectl describe pod -n sample-app <pod-name>
kubectl logs -n sample-app <pod-name>

# Service?????????
kubectl get endpoints -n sample-app
kubectl get svc -n sample-app -o yaml

# Terraform???
terraform refresh
terraform state list
```

## ??????

1. **??????**: PRACTICE.md????1-2????
2. **????**: ???3?????????????
3. **????**: ???4??????????
4. **???????**: TROUBLESHOOTING.md???
5. **????**: ?????????????

**??**: ??????????????????????????
