# ?????

?????????Terraform?Kubernetes???????????????

## ???1: ??????

### ??1-1: ?????????????
**??**: Docker Compose??????????????????

**??**:
1. `make docker-compose-up` ???
2. `curl http://localhost:8080/health` ????????
3. `make docker-compose-down` ???

**??????**:
- [ ] ????????????
- [ ] ?????????????
- [ ] ??????????

### ??1-2: Kubernetes???????
**??**: ?????Kubernetes???????

**??**:
1. Minikube???: `minikube start`
2. ?????????: `kubectl cluster-info`
3. ??????: `kubectl get nodes`

**??????**:
- [ ] ?????????????
- [ ] kubectl??????????????

### ??1-3: Terraform????
**??**: Terraform?????????????????????

**??**:
1. `terraform init` ???
2. `.terraform/` ???????????????
3. `terraform version` ?????????

**??????**:
- [ ] Terraform???????????
- [ ] Kubernetes?????????????????

## ???2: Terraform??????

### ??2-1: Terraform??????????
**??**: Terraform????Kubernetes???????????

**??**:
1. `terraform plan` ????????
2. `terraform apply` ????????
3. `kubectl get all -n sample-app` ???

**??????**:
- [ ] Plan??????????
- [ ] ??????????????
- [ ] Pod?Running???????

### ??2-2: ???????
**??**: Terraform????????????

**??**:
1. `main.tf`?`replicas`?2??3???
2. `terraform plan` ????????
3. `terraform apply` ??????
4. `kubectl get pods -n sample-app` ?Pod??3???????

**??????**:
- [ ] Plan?????????????
- [ ] ???Pod???????
- [ ] ?????????????????

### ??2-3: ???????
**??**: Terraform??????????

**??**:
1. `terraform destroy` ???
2. `kubectl get namespace sample-app` ?Namespace?????????

**??????**:
- [ ] ??????????????
- [ ] Namespace???????

## ???3: Kubernetes?????????

### ??3-1: ConfigMap???
**??**: ???????ConfigMap?????

**???**:
1. `main.tf`?ConfigMap???????
2. ConfigMap?Deployment??????????
3. `terraform apply` ???
4. Pod????????: `kubectl exec -n sample-app <pod-name> -- env`

**???**:
```hcl
resource "kubernetes_config_map" "app_config" {
  metadata {
    name = "app-config"
    namespace = kubernetes_namespace.sample_app.metadata[0].name
  }
  data = {
    APP_NAME = "sample-app"
    VERSION = "1.0.0"
  }
}
```

### ??3-2: ??????????
**??**: ?????????????????????

**???**:
1. `variables.tf`??????????????
2. `terraform.tfvars.example`???
3. ??????????????

**???**:
```hcl
# variables.tf
variable "replica_count" {
  description = "Number of replicas"
  type        = number
  default     = 2
}
```

### ??3-3: Resource Limits???
**??**: ????????????

**???**:
1. ????????128Mi??256Mi???
2. CPU?????200m??500m???
3. Plan??????????

### ??3-4: Health Check???
**??**: Liveness/Readiness Probe?????

**???**:
1. Deployment?`liveness_probe`?`readiness_probe`???
2. `/health`??????????
3. ????????

**???**:
```hcl
liveness_probe {
  http_get {
    path = "/health"
    port = 8080
  }
  initial_delay_seconds = 30
  period_seconds = 10
}
```

## ???4: ??????????

### ??4-1: Ingress???
**??**: ??????????????Ingress???

**???**:
1. Ingress???????????????Minikube???: `minikube addons enable ingress`?
2. `main.tf`?Ingress???????
3. ??????????????????

### ??4-2: Secrets???
**??**: ?????Secret?????

**???**:
1. `kubernetes_secret`???????
2. Deployment?Secret???
3. `.gitignore`?Secret??????????????

**?? ??**: ??????????`.gitignore`????????

### ??4-3: ???????
**??**: dev/staging/prod????????

**???**:
1. `terraform/`?????????
2. `terraform/dev/`?`terraform/prod/`???
3. ?????????????

## ???????: ????

### Terraform??
- [ ] Terraform????????init, plan, apply, destroy??????
- [ ] ?????????????????
- [ ] ?????????????
- [ ] Terraform??????????

### Kubernetes??
- [ ] Namespace, Deployment, Service????????
- [ ] kubectl?????????????
- [ ] Pod??????????????
- [ ] Port Forwarding????????

### ?????
- [ ] ConfigMap?????????
- [ ] Resource Limits?????????
- [ ] Health Check??????
- [ ] ???????????????

## ??????

???????????????????????????????????

1. **??????**: Prometheus/Grafana???
2. **CI/CD**: GitHub Actions????????
3. **Helm**: Helm??????????
4. **???????**: Sidecar???????
5. **State??**: Terraform Cloud/Backend???

## ??????

- [Terraform????????](https://www.terraform.io/docs)
- [Kubernetes????????](https://kubernetes.io/docs/)
- [Terraform Kubernetes Provider](https://registry.terraform.io/providers/hashicorp/kubernetes/latest/docs)
